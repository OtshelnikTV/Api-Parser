plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.17.2'
}

group 'com.apiHelper'
version '1.0.0'

repositories {
    mavenCentral()
    google()
}

dependencies {
    implementation 'org.yaml:snakeyaml:2.2'
}

intellij {
    version = '2023.2.5'
    type = 'IC'  // IC = Community Edition, IU = Ultimate
    plugins = []
}

tasks {
    patchPluginXml {
        sinceBuild = '232'
        untilBuild = '253.*'
    }

    signPlugin {
        certificateChain = System.getenv("CERTIFICATE_CHAIN")
        privateKey = System.getenv("PRIVATE_KEY")
        password = System.getenv("PRIVATE_KEY_PASSWORD")
    }

    publishPlugin {
        token = System.getenv("PUBLISH_TOKEN")
    }
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
}

tasks.withType(Test).configureEach {
    systemProperty 'file.encoding', 'UTF-8'
}